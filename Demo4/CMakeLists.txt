# CMake Version Required
cmake_minimum_required (VERSION 2.8)

# project info
project (Demo4)

# set(CMAKE_INCLUDE_CURRENT_DIR ON)

# option(option_name "option_description" [initial_value])
# option (USE_MYMATH "Use provided math implementation" ON)
option (USE_MYMATH "Use provided math implementation" OFF)


# add the configuration head file
# the "config.h" is generated by the "config.h.in"
configure_file (
  "${PROJECT_SOURCE_DIR}/config.h.in"
  "${PROJECT_BINARY_DIR}/config.h"
  )

# 是否加入 MathFunctions 库
if(USE_MYMATH)
    # include_directories([AFTER|BEFORE] [SYSTEM] directory1 [directory2 ...])
    # add the head files under math during the compilation
    include_directories("${PROJECT_SOURCE_DIR}/math")
    # add the sub_directory for the cmake_list.txt
    add_subdirectory(math)
    # 将 EXTRA_LIBS 的值与字符串 "MathFunctions" 连接，重新赋值给 EXTRA_LIBS
    set (EXTRA_LIBS ${EXTRA_LIBS} MathFunctions)
# else()
#     # 不链接math库会报错，因为linux中默认没有math库
#     LINK_LIBRARIES(m)
endif(USE_MYMATH)

# add the source files under the current direcotry
aux_source_directory(. DIR_SRCS)

# 指定生成目标
add_executable (Demo4 ${DIR_SRCS})
target_link_libraries (Demo4  ${EXTRA_LIBS})
